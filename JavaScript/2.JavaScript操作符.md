---
title: JavaScript操作符
category: JavaScript
tags: JavaScript
---

# JavaScript操作符

### 1 一元操作符

##### 1 递增递减操作符

在执行前置递增和递减操作的时候，变量的值都是在求值以前被改变的（副效应）；

    var num1 = 2;
    var num2 = 20;
    var num3 = --num1 + num2;     // 21  num1先减去1再与num2计算
    var num4 = num1 + num2;       // 21

后置递增和递减操作符是在包含它们的语句被求值之后才执行的；

    var num1 = 2;
    var num2 = 20;
    var num3 = num1-- + num2;     // 22  
    var num4 = num1 + num2;       // 21    

递增递减的操作符不仅适用于整数，还可以用以字符串、布尔、浮点数值、对象。

##### 2 加减操作符

一元加操作符应用在不同对象上的结果：

    var s1 = "01";
    var s2 = "1.1";
    var s3 = "z";
    var b = "false";
    var f = 1.1;
    var o = {
        valueOf: function() {
            return -1;
        }
    };

    s1 = + s1;       // 1
    s2 = + s2;       // 1.1
    s3 = + s3;       // NaN
    b  = + b ;       // 0
    f  = + f ;       // 1.1
    o  = + o ;       // -1

将一元减操作符应用于数值时，该值会变为负数，当应用于非数值时，一元减操作符遵循与一元加操作符相同的规则。

综上，将加减操符应用于不同对象时：

- 应用于有效数值字符串时，先转换为数字值，进行操作；
- 应用于不包含有效数值字符串时，将变量的值设置为NaN；
- 应用于bool值时，false转换为0，true转换为1，,然后进行操作；
- 应用于对象时，先调用对象的valueOf()以取得一个可供操作的值，然后对该值应用前述规则。如果结果是NaN,则再调用toString()再次应用前述规则。


### 2 位操作符

ECMAScript中所有的数值都以都以IEEE-754 64位格式存储，但位操作符并不直接操作64位的值，而是先将64位的值转换成32位的整数然后进行操作。

对于有符号的整数，32位中的前31位用于表示整数的值，第三十二用于表示数值的符号。0表示正数，1表示负数。这个表示符号位的叫做符号位，符号位的值决定其他位数值的格式。

- 正数：纯二进制格式存储，31位中每一位表示2的幂
- 负数：同样与二进制码储存，但使用的是二进制补码，计算一个数值的补码要经过如下步骤；

  （1）求这个数值绝对值二进制码（如要求-18的二进制码，先求18的二进制码）；
  （2）求二进制反码，即将0转换为1，将1转换为0；
  （3）得到的二进制反码加1；

ECMAScript会尽力向我们隐藏这些信息。即在以二进制字符串形式输出一个负数时，我们看到的是

##### 2.1 按位非

##### 2.2 按位与

##### 2.3 按位或

##### 2.4 按位异或


### 3 布尔操作符

##### 1 逻辑非

!可以应用于ECMAScript中的任何值，并且返回一个boolean值。逻辑!会将操作数转换为一个布尔值，然后再对其求反。

如果操作数是一个对象，返回false，如果操作数是NaN或undefined返回true。

    alert(!"blue");       // false
    alert(!0);            // false
    alert(!NaN);          // true 
    alert(!"");           // true
    alert(!12345);        // false

逻辑非操作符也可以用于将一个值转换为与其对应的布尔值，同时使用两个非!!，实际上就会模拟Boolean()转型函数的行为。第一个!会基于无论什么操作返回一个布尔值，而第二个逻辑!则对该布尔值求反，就得到了这个值真正的布尔值。最终结果与使用Boolena()相同。

##### 2 逻辑与

逻辑与同样应用于任何类型的操作数，且返回值不一定是boolean值，且逻辑与扣件属于短路操作，即如果第一个操作数能决定结果则不会对第二个操作数求值，具体规则如下；

- 如果第一个操作数是对象，返回第二个操作数；
- 如果第二个操作数是对象，只有在第一个操作数求值结果为true的情况下才会返回；
- 如果有一个操作数是null，则返回null；
- 如果有一个操作数为undefined，则返回undfined;

例：

    var found = true;
    var result = (found && someUndefinedVariable);      // 错误
    alert(result);

    var found = false;
    var result = (found && someUndefinedVariable);      // 不会发生错误
    alert(result);

##### 3 逻辑或

逻辑或的返回值同样与操作数的类型相关，不是返回简单的bollean值。

### 4 乘性操作符

ECMAScript定义了三个乘性操作符：乘法、除法、求模；

##### 4.1 乘法

规则如下：

- 如果有一个操作符是NaN，则结果是NaN;
- 如果Infinity与0相乘，结果是NaN；如果Infinity与非0数值相乘，则结果是Infinity；如果Infinity与Infinity相乘，则结果是Infinity。
- 如果有一个值不是数值，则在后台调用Number()将其转换为数值，然后再应用上述规则；

##### 4.2 除法
- 如果一个数是NaN，则返回NaN；
- Infinity被任何非零数值除，结果是Infinity；
- 0被0除，则结果是NaN；

##### 4.3 求模

与另外两个乘性操作符类似，求模操作符类似，遵循下列特殊规则来处理特殊的值：

- 被除数是无穷大值而除数是有限大，返回NaN;
- 被除数是有限大大值而除数是0，返回NaN;
- Infinity被Infinity除，则结果是NaN;
- 如果被除数是0，则结果是0；

### 5 加性操作符

#####5.1 加法

- 如果两个操作数都是字符串，则将它们拼接起来；
- 如果只有一个操作数是字符串，则将另一一个操作数转换为字符串拼接起来；

#####5.2 减法

- Infinity减运算为NaN;
- Infinity加运算为Infinity；
- 如果有一个操作数是非数值，调用Number()函数将其转换为数值；
- 如果有一个操作数是对象，调用valueOf()方法或者toString()方法得到的值进行计算；

### 6 关系操作符

 /< > <= >=这几个关系操作符用于对两个数值进行比较，都返回一个布尔值。

 - 如果两个数都是字符串，则比较两个字符串的编码值；
 - 如果一个操作数是数值，将另一个操作数转换为一个数值；
 - 如果是布尔值，先转换为数值；
 - 如果是对象，先调用valueOf()方法，或者调用toString方法；
 - 任何操作数与NaN比较，返回false;

### 7 相等操作符

##### 7.1 相等和不相等

- null 和 undefined 是相等的；
- 如果一个操作数为NaN，则相等操作符返回false，而不相等操作符返回true；
- 如果两个都是NaN，相等操作符也返回false；

##### 7.2 全等和不全等

全等操作符，它只在两个操作数未经转换就不相等的情况下返回true;

    null == undefined;       // true
    null === undefined;      // false
